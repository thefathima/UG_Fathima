<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500;700;900&display=swap"
        rel="stylesheet">

    <title>QuickFix</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">


    <!-- Additional CSS Files -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
        integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
    <link rel="stylesheet" href="assets/css/templatemo-chain-app-dev.css">
    <link rel="stylesheet" href="assets/css/animated.css">
    <link rel="stylesheet" href="assets/css/owl.css">
    <link rel="stylesheet" href="assets/css/appliance.css">

    <style>
        .product-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .product-image {
            width: 100%;
            /* Adjust this as necessary to fit your design */
            display: block;
            /* Ensures the image doesn't have extra space below it */
        }

        .add-to-cart-btn {
            width: 100%;
            margin-top: auto;
            /* Pushes the button to the bottom if there's extra space */
            background-color: #02284d;
            /* Dark blue background */
            color: white;
            /* White text */
            border: none;
            /* Removes any default border */
            padding: 10px 0;
            /* Adds some padding inside the button for better visual appearance */
            cursor: pointer;
            /* Changes cursor to pointer on hover over the button */
            transition: background-color 0.3s ease;
            /* Smooth transition for hover effect */
            border-radius: 5px;
            /* Rounds the corners of the button */
        }

        .add-to-cart-btn:hover {
            background-color: #1968b8;
            /* Slightly darker blue on hover for feedback */
        }
    </style>

</head>

<body>

    <!-- ** Header Area Start ** -->
    <header class="header-area header-sticky wow slideInDown" data-wow-duration="0.75s" data-wow-delay="0s">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <nav class="main-nav">
                        <!-- ** Logo Start ** -->
                        <a href="index.html" class="logo">
                            <!-- <img src="assets/images/logoqf2.png" alt="Chain App Dev">-->
                            <img src="assets/images/logoqf2.png" alt="Chain App Dev">
                        </a>
                        <!-- Logo End -->
                        <!-- Menu Start -->
                        <ul class="nav">
                            <li class="scroll-to-section"><a href="index.html">Home</a></li>
                            <li class="scroll-to-section"><a href="aboutus.html">About Us</a></li>
                            <li class="scroll-to-section"><a href="appliance.html">Appliance</a></li>
                            <li class="scroll-to-section"><a href="spare.html" class="active">Parts</a></li>
                            <li class="scroll-to-section"><a href="video.html">Information Guide</a></li>
                            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                            <li class="scroll-to-section"><a href="checkout.html" style="font-weight: bold;">Checkout <i
                                        class="fas fa-shopping-cart"></a></i></li>

                            <!-- Updated Checkout Button with Icon -->
                            <!--<li class="scroll-to-section"><a href="checkout.html" class="checkout-button"><i class="fas fa-shopping-cart"></i> Checkout</a></li>
              -->
                        </ul>
                        <a class='menu-trigger'>
                            <span>Menu</span>
                        </a>
                        <!-- ** Menu End ** -->
                    </nav>
                </div>
            </div>
        </div>
    </header>
    <!-- ** Header Area End ** -->


<!-- SPARE PARTS START -->
    <div id="services" class="services section">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 offset-lg-2">
                    <div class="section-heading wow fadeInDown" data-wow-duration="1s" data-wow-delay="0.5s">
                        <h4>High-End <em>Spare Parts</em> for you</h4>
                        <h2>For all your appliance needs:</h2>
                    </div>
                </div>
            </div>
            <!-- HTML for the dropdown list -->
            <label for="sort-options">Sort by:</label>
            <select id="sort-options" onchange="sortProducts()">
                <option value="lowToHigh">Low to High</option>
                <option value="highToLow">High to Low</option>
            </select>
            <!-- This is where the parts will be displayed -->
            <ul id="ulP"></ul>
        </div>
    </div>

    <!-- SCRIPT TO FETCH FROM DATABASE AND ADD TO CART -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const list = document.getElementById('ulP');

            // Fetching the spare parts data
            fetch('http://localhost:3000/collection/spare_parts')
                .then(response => response.json())
                .then(parts => {
                    parts.forEach(part => {
                        const item = document.createElement('li');
                        item.id = "liP";
                        item.innerHTML = `
                <h3>${part.title}</h3>
                <img src="${part.images[0]}" alt="${part.title}">
                <h6>${part.description}</h6>
                <br>
                <h5>AED ${part.price}</h5>
                <button class="add-to-cart-btn">Add to Cart</button>
            `;
                        list.appendChild(item);
                    });
                })
                .catch(error => console.error('Error fetching the spare parts:', error));

            // Event delegation for "Add to Cart" buttons
            list.addEventListener('click', function (event) {
                if (event.target.classList.contains('add-to-cart-btn')) {
                    const product = event.target.closest('li');
                    const title = product.querySelector('h3').innerText;
                    const price = product.querySelector('h5').innerText;
                    const imageSrc = product.querySelector('img').src;

                    const cartItem = {
                        title: title,
                        price: price,
                        imageSrc: imageSrc,
                        quantity: 1
                    };

                    let cart = localStorage.getItem('cart') ? JSON.parse(localStorage.getItem('cart')) : [];
                    let existingItem = cart.find(item => item.title === title);
                    if (existingItem) {
                        existingItem.quantity += 1;
                    } else {
                        cart.push(cartItem);
                    }

                    localStorage.setItem('cart', JSON.stringify(cart));
                    alert(title + ' added to cart');
                }
            });
        });

    </script>


    <footer id="newsletter">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 offset-lg-2">
                    <div class="section-heading">
                        <h4>Join our mailing list to receive the news &amp; latest trends</h4>
                    </div>
                </div>
                <div class="col-lg-6 offset-lg-3">
                    <form id="search" action="#" method="GET">
                        <div class="row">
                            <div class="col-lg-6 col-sm-6">
                                <fieldset>
                                    <input type="address" name="address" class="email" placeholder="Email Address..."
                                        autocomplete="on" required>
                                </fieldset>
                            </div>
                            <div class="col-lg-6 col-sm-6">
                                <fieldset>
                                    <button type="submit" class="main-button">Subscribe Now <i
                                            class="fa fa-angle-right"></i></button>
                                </fieldset>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-3">
                    <div class="footer-widget">
                        <h4>Contact Us</h4>
                        <p>Rio de Janeiro - RJ, 22795-008, Brazil</p>
                        <p><a href="#">010-020-0340</a></p>
                        <p><a href="#">info@company.co</a></p>
                    </div>
                </div>
                <div class="col-lg-3">
                    <div class="footer-widget">
                        <h4>About Us</h4>
                        <ul>
                            <li><a href="#">Home</a></li>
                            <li><a href="#">Services</a></li>
                            <li><a href="#">About</a></li>
                            <li><a href="#">Testimonials</a></li>
                            <li><a href="#">Pricing</a></li>
                        </ul>
                        <ul>
                            <li><a href="#">About</a></li>
                            <li><a href="#">Testimonials</a></li>
                            <li><a href="#">Pricing</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-3">
                    <div class="footer-widget">
                        <h4>Useful Links</h4>
                        <ul>
                            <li><a href="#">Free Apps</a></li>
                            <li><a href="#">App Engine</a></li>
                            <li><a href="#">Programming</a></li>
                            <li><a href="#">Development</a></li>
                            <li><a href="#">App News</a></li>
                        </ul>
                        <ul>
                            <li><a href="#">App Dev Team</a></li>
                            <li><a href="#">Digital Web</a></li>
                            <li><a href="#">Normal Apps</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-3">
                    <div class="footer-widget">
                        <h4>About Our Company</h4>
                        <div class="logo">
                            <img src="assets/images/white-logo.png" alt="">
                        </div>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut
                            labore et
                            dolore.</p>
                    </div>
                </div>
                <div class="col-lg-12">
                    <div class="copyright-text">
                        <p>Copyright Â© 2022 Chain App Dev Company. All Rights Reserved.
                            <br>Design: <a href="https://templatemo.com/" target="_blank"
                                title="css templates">TemplateMo</a>
                        </p>
                    </div>
                </div>
            </div>

        </div>

    </footer>

    <!-- Scripts -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/owl-carousel.js"></script>
    <script src="assets/js/animation.js"></script>
    <script src="assets/js/imagesloaded.js"></script>
    <script src="assets/js/popup.js"></script>
    <script src="assets/js/custom.js"></script>

    <!-- SCRIPT TO SORT SPARE PARTS LOW-HIGH AND HIGH-LOW -->
    <script>
        function sortProducts() {
            var selectBox = document.getElementById("sort-options");
            var selectedValue = selectBox.options[selectBox.selectedIndex].value;
            var productList = document.getElementById("ulP");
            var products = Array.from(productList.children);

            if (selectedValue === "lowToHigh") {
                products.sort(function (a, b) {
                    var priceA = parseFloat(a.querySelector("h5").innerText.replace("AED ", ""));
                    var priceB = parseFloat(b.querySelector("h5").innerText.replace("AED ", ""));
                    return priceA - priceB;
                });
            } else if (selectedValue === "highToLow") {
                products.sort(function (a, b) {
                    var priceA = parseFloat(a.querySelector("h5").innerText.replace("AED ", ""));
                    var priceB = parseFloat(b.querySelector("h5").innerText.replace("AED ", ""));
                    return priceB - priceA;
                });
            }

            // Clear the product list
            while (productList.firstChild) {
                productList.removeChild(productList.firstChild);
            }

            // Append sorted products to the list
            products.forEach(function (product) {
                productList.appendChild(product);
            });
        }

    </script>

</body>

</html>